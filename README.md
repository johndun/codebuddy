# Codebuddy

This project enables ChatGPT to submit terminal commands and edit files locally. The terminal functionality works by piping commands to a tmux session. File editing is accomplished by parsing ChatGPT's responses for keywords, such as OVERWRITE, REPLACE, APPEND, followed by markdown code blocks.

[This blog post](https://cursor.sh/blog/instant-apply) by Cursor is a good overview of the challenges that we face when trying to use current propriety LLMs to edit files.

## Warnings

Automatically executing code generated by an LLM on your local computer is super dangerous. Take precautions to ensure you don't lose your work:

- Make non-local copies of your project.
- Work in a dev git branch and frequently push updates to a remote.
- Honestly, you probably shouldn't use this project on a computer with any content that you care about at all. Work in a temporary cloud environment: AWS Sagemaker, etc., instead.

## Setup

Package was developed using python version 3.12.3. To setup the venv environment:

```shell
python3 -m venv codebuddy-venv
source codebuddy-venv/bin/activate
pip install -r requirements.txt
```

Tmux is used to create a persistent session that the LLM can submit commands to.

The `tree` command is used to include a summary of the project's file structure in the prompt. Depending your OS:

```shell
sudo apt install tree
```

```shell
brew tree
```

Turn off git paging to make it easier for an LLM to execute git commands (e.g, `git branch` or `git log`) on your behalf:

```shell
git config --global core.pager cat
```

You will need to make your OpenAI API key available in the `OPENAI_API_KEY` environment variable. I've been using a `.env` file along with the `dotenv` package.


## Usage

Run in local gradio:

```shell
python codebuddy/tmux_module.py --project_path path/to/project
```

## Notes and Troubleshooting

If you run into errors launching gradio from within tmux, you may need to unset the $TMUX environment variable to allow for nested tmux sessions.
